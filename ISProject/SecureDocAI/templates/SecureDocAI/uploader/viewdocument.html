{% extends "SecureDocAI/uploader/layout.html" %}
{% load static %}  <!-- Make sure this is at the top -->

{% block title %}SecureDocAI - UploadDocument{% endblock %}

{% block content %}

<style>
    .btn-link {
    display: inline-block;
    padding: 10px 20px;
    margin-top: 10px;
    color: white;
    background-color: #6277b8;
    border-radius: 5px;
    text-decoration: none;
    font-weight: 600;
    transition: background-color 0.3s ease, transform 0.2s ease;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.btn-link:hover {
    background-color: #45a049;
    transform: translateY(-2px);
}

.btn-link:active {
    transform: scale(0.98);
}

.btn-link.disabled {
    pointer-events: none;
    background-color: #aaa;
    cursor: default;
}


a {
    text-decoration: none;
}

/* Navigation styles */
.main-nav {
    background-color: white;
    border-bottom: 1px solid #e5e7eb;
}

.nav-links {
    display: flex;
    justify-content: center;
}

.nav-link {
    padding: 1rem 1.5rem;
    color: #4b5563;
    text-decoration: none;
    font-weight: 500;
    border-bottom: 2px solid transparent;
    transition: all 0.2s ease;
}

.nav-link:hover {
    color: #2563eb;
    border-bottom-color: #2563eb;
}

.nav-link.active {
    color: #2563eb;
    border-bottom-color: #2563eb;
}
</style>

<nav class="main-nav">
    <div class="container">
        <div class="nav-links">
            <a href="{% url 'uploader_dashboard' %}" class="nav-link">Upload Documents</a>
            <a href="{% url 'uploaderViewDocument' %}" class="nav-link active">View Documents</a>
            <a href="{% url 'uploaderAccesslog' %}" class="nav-link">Access log</a>
        </div>
    </div>
</nav>

<main class="container">

    <section class="documents-section">
        <h2><i data-lucide="eye"></i> Your Documents</h2>
        <div id="documentsList" class="documents-list">
            {% for doc in documents %}
            <div class="document-item">
                <div class="document-header">
                    <div class="document-info">
                        <i data-lucide="file-text" style="color: #2563eb;"></i>
                        <div>
                            <h3 class="font-medium">{{ doc.title }}</h3>
                            <p class="text-sm text-gray-500">{{ doc.encrypted_file.name|cut:"encrypted/" }}</p>
                        </div>
                    </div>
                    <div class="document-type">
                        {% if doc.classification == "confidential" %}
                            <i data-lucide="shield" class="type-icon" style="color: #dc2626;"></i>
                        {% elif doc.classification == "private" %}
                            <i data-lucide="lock" class="type-icon" style="color: #ca8a04;"></i>
                        {% elif doc.classification == "restricted" %}
                            <i data-lucide="alert-circle" class="type-icon" style="color: #ea580c;"></i>
                        {% else %}
                            <i data-lucide="file-lock" class="type-icon" style="color: #6b7280;"></i>
                        {% endif %}
                        <span class="capitalize">{{ doc.classification }}</span>
                    </div>
                </div>
                <p class="mt-2 text-gray-600">{{ doc.description }}</p>
                <div class="mt-2 text-sm text-gray-500">Uploaded on {{ doc.uploaded_at|date:"Y-m-d" }}</div>
                <div class="document-actions mt-3">
                    <a href="{% url 'view_document1' doc.id %}" class="view-btn">
                        <i data-lucide="eye"></i>
                    </a>
                    <a href="{% url 'delete_document' doc.id %}" class="delete-btn" onclick="return confirm('Are you sure you want to delete this document?');">
                        <i data-lucide="trash-2"></i>
                    </a>
                </div>
            </div>
            {% empty %}
            <p>No documents uploaded yet.</p>
            {% endfor %}
        </div>
    </section>
    

</main>
<script>lucide.createIcons();</script>

{% endblock %}
